<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The Chefs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>
  
  
  
    <body class="bg-body-tertiary" style="font-family: Ariel, sans-serif;">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg bg-body-secondary shadow-sm" style="padding: 0.5rem 0; font-weight: bold; font-size: medium">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">The Chefs v0.1</a>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="/feed">Feed</a>
                    </li>
                    
                </ul>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" >/</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/register">Register</a>
                    </li>
                </ul>
            </div>
        </nav>

       <!--  Main Body  -->

        <div class="container text-start">
            <div class="row">

                <!-- Image Column-->
                <div class="col-3 p-3">
                    <p>Image image image image</p>



                </div>

                <!-- Information Column-->
                <div class="col-6 p-3" id="informationDiv">
                    
                    
            



                </div>

                <!-- Comments and Ratings Column-->
                <div class="col p-3">





                </div>

                <script>
                    const params = new URLSearchParams(window.location.search);
                    const link = document.getElementById('link');
                    const url = params.get('url');
                    //link.innerHTML = url;
                    console.log(url);

                    async function loadRecipes() {
                        try {
                        const response = await fetch(`/api/details?url=${encodeURIComponent(url)}`);
                        const data = await response.json();
                        
                        if (!data.ok || !data.data) {
                            console.error('Failed to load recipes');
                            return;
                        }

                        // Log the data into console
                        console.log('Recipes API response:', data.data);
                        
                        // Inputs data into the page
                        data.data.forEach(recipe => {

                            // Creates row for grid placement
                            const row = document.createElement('div');
                            row.className = 'row p-3 ps-5 bg-white mt-5 rounded shadow text-start';

                            // Populates card with basic database data
                            row.innerHTML = `
                                <h1 class="mt-3">${recipe.recipename}</h1>
                                <h5>Author</h5>
                                <p class="mb-2">${recipe.url}</p>
                                <h5>${recipe.recipedescription}</h5>

                                <h3>Ingredients</h3>
                            `;
                        

                            // Iterates through ingredients and creates an unordered list
                            const ul = document.createElement('ul');
                            ul.className = 'ms-5';
                            recipe.ingredients.forEach((ingredient) => {
                                const li = document.createElement('li');
                                li.innerHTML = ingredient;
                                ul.appendChild(li);
                            });
                            row.appendChild(ul);

                            // Iterates through step
                            const ol = document.createElement('ol');
                            ol.style.listStyle = 'none';

                            let stepnum = 0;
                            recipe.stepnames.forEach((steps,index) => {
                                stepnum++;

                                //Creates elements
                                const li = document.createElement('li');
                                const stepname = document.createElement('h3');
                                const stepdesc = document.createElement('p');

                                // Establishes needed styling
                                stepname.style.listStyle = 'none';
                                stepdesc.className = `ps-3`;

                                //Populates elements
                                stepname.innerHTML = stepnum + '. ' + recipe.stepnames[index];
                                stepdesc.innerHTML = recipe.stepdescs[index];

                                li.appendChild(stepname);
                                li.appendChild(stepdesc);
                                ol.appendChild(li);
                            });
                            row.appendChild(ol);

                            // Appends child into the information div
                            document.getElementById('informationDiv').appendChild(row);
                        });
                            } catch (err) {
                            console.error('Error loading recipes:', err);
                            }
                        }

                    // Load recipes when page loads
                    document.addEventListener('DOMContentLoaded', loadRecipes);
                </script>
            </div>
        </div>























    </body>
</html>